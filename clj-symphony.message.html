<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clj-symphony.message documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-symphony</span> <span class="project-version">0.2.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-symphony</span></div></div></li><li class="depth-2 branch"><a href="clj-symphony.chat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chat</span></div></a></li><li class="depth-2 branch"><a href="clj-symphony.connect.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connect</span></div></a></li><li class="depth-2 branch current"><a href="clj-symphony.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-2 branch"><a href="clj-symphony.room.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>room</span></div></a></li><li class="depth-2 branch"><a href="clj-symphony.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-2 branch"><a href="clj-symphony.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-2"><a href="clj-symphony.user-connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user-connection</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-symphony.message.html#var-deregister-listener"><div class="inner"><span>deregister-listener</span></div></a></li><li class="depth-1"><a href="clj-symphony.message.html#var-escape"><div class="inner"><span>escape</span></div></a></li><li class="depth-1"><a href="clj-symphony.message.html#var-message-formats"><div class="inner"><span>message-formats</span></div></a></li><li class="depth-1"><a href="clj-symphony.message.html#var-msgobj-.3Emap"><div class="inner"><span>msgobj-&gt;map</span></div></a></li><li class="depth-1"><a href="clj-symphony.message.html#var-register-listener"><div class="inner"><span>register-listener</span></div></a></li><li class="depth-1"><a href="clj-symphony.message.html#var-send-message.21"><div class="inner"><span>send-message!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-symphony.message</h1><div class="doc"><pre class="plaintext">Operations related to messages.  Currently, Symphony supports these message formats:
1. plain text
2. messageML, which supports a small number of formatting tags
3. MessageMLv2 (as of Symphony v1.46)</pre></div><div class="public anchor" id="var-deregister-listener"><h3>deregister-listener</h3><div class="usage"><code>(deregister-listener connection listener)</code></div><div class="doc"><pre class="plaintext">Deregisters a previously-registered message listener.  Once deregistered, a listener should be discarded (they cannot be reused). Returns true if a valid message listener was deregistered, false otherwise.
</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L102">view source</a></div></div><div class="public anchor" id="var-escape"><h3>escape</h3><div class="usage"><code>(escape s)</code></div><div class="doc"><pre class="plaintext">Escapes the given string for MessageML.
</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L51">view source</a></div></div><div class="public anchor" id="var-message-formats"><h3>message-formats</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The set of possible message formats in Symphony, as keywords.
</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L46">view source</a></div></div><div class="public anchor" id="var-msgobj-.3Emap"><h3>msgobj-&gt;map</h3><div class="usage"><code>(msgobj-&gt;map message)</code></div><div class="doc"><pre class="plaintext">Converts a SymMessage object into a map.
</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L28">view source</a></div></div><div class="public anchor" id="var-register-listener"><h3>register-listener</h3><div class="usage"><code>(register-listener connection f)</code></div><div class="doc"><pre class="plaintext">Registers f, a function with 1 parameter, as a message listener (callback), and returns a handle to that listener so that it can be deregistered later on, if needed.  Listeners registered in this manner are not scoped to any particular stream - they will be sent all messages from all streams that the authenticated connection user is a participant in.

The argument passed to f is a map generated by msgobj-&gt;map (see that fn for details).

The value returned by f (if any) is ignored.</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L87">view source</a></div></div><div class="public anchor" id="var-send-message.21"><h3>send-message!</h3><div class="usage"><code>(send-message! connection target message)</code><code>(send-message! connection target message entity-data)</code></div><div class="doc"><pre class="plaintext">Sends the given message (a String), optionally including entity data (a String containing JSON) to the given target (chat, room, or stream).

See:
  * <a href="https://rest-api.symphony.com/docs/messagemlv2">https://rest-api.symphony.com/docs/messagemlv2</a> for details on MessageMLv2's formatting capabilities
  * <a href="https://rest-api.symphony.com/docs/objects">https://rest-api.symphony.com/docs/objects</a> for details on MessageMLv2's entity data capabilities</pre></div><div class="src-link"><a href="https://github.com/symphonyoss/clj-symphony/blob/master/src/clj_symphony/message.clj#L70">view source</a></div></div></div></body></html>